# Observer Design Pattern in Vim9script

## Overview

The **Observer Pattern** is a behavioral design pattern where multiple observers are notified when a subjectâ€™s state changes. It enables loose coupling between the subject and its observers.

## Intent

- Define a one-to-many dependency
- Automatically notify observers on state changes
- Keep subject and observers loosely coupled

## Also Known As

- Publish/Subscribe

## When to Use

Use the Observer pattern when:
- Many objects depend on changes in another object
- You need event-based updates
- You want to decouple state producers and consumers

## Structure

```
Subject -> Observer
```

## Participants

1. **Subject**: Maintains observers and notifies them (`WeatherStation`)
2. **Observer**: Receives updates (`ConsoleDisplay`, `AlertService`)
3. **Concrete Observers**: React to notifications

## Implementation in Vim9script

The example uses Vim9 classes, interfaces, enums, type aliases, and abstract classes:

```vim
interface IObserver
  def Update(temp: float, level: AlertLevel, output: list<string>): void
endinterface

class WeatherStation extends SubjectBase
endclass
```

## Examples Included

### 1. Weather Station Updates
**Scenario**: Temperature changes notify observers.

**Components**:
- Subject: `WeatherStation`
- Observers: `ConsoleDisplay`, `CoolingSystem`, `AlertService`

**Usage**:
```vim
var station = WeatherStation.new()
station.Attach(ConsoleDisplay.new())
station.SetTemperature(32.0, [])
```

## Running the Examples

### Source the file
```vim
:source behavioral-patterns/observer/observer_pattern.vim
```

### Run the complete demo
```vim
:call g:RunObserverPatternDemo()
```

## Key Concepts Demonstrated

1. **One-to-Many Updates**
2. **Loose Coupling** between subject and observers
3. **Dynamic Subscription** via `Attach` and `Detach`

## Advantages

1. **Scalable**: Add new observers without changing subject
2. **Decoupled**: Observers depend on a stable interface
3. **Reactive**: State changes propagate immediately

## Disadvantages

1. **Update Order**: Not guaranteed without extra logic
2. **Performance**: Many observers can be costly

## Related Patterns

- **Mediator**: Centralizes communication
- **Event Bus**: Generalization of observer
- **Command**: Can encapsulate observer actions

## Vim9script Notes

- Abstract subject base class simplifies observer management
- Enums represent alert states clearly
- Type aliases clarify signatures

## Requirements

- Vim 9.0 or later (for Vim9script class support)
- No external dependencies

## License

MIT License - Feel free to use this for learning and teaching design patterns!

## Credits

These design pattern examples were generated by GitHub Copilot to demonstrate modern Vim9script capabilities and software design principles.

## References

For more information about the Observer pattern, visit:

- **Refactoring.Guru**: [Observer Pattern](https://refactoring.guru/design-patterns/observer)
- **Gang of Four Book**: "Design Patterns: Elements of Reusable Object-Oriented Software" by Gamma, Helm, Johnson, Vlissides - Pages 293-304
- **Wikipedia**: [Observer Pattern](https://en.wikipedia.org/wiki/Observer_pattern)
- **SourceMaking**: [Observer Design Pattern](https://sourcemaking.com/design_patterns/observer)

## Conclusion

The Observer pattern enables reactive systems where subjects broadcast changes to interested observers. This Vim9script example demonstrates a weather station notifying multiple outputs using modern language features.
