# Factory Method Design Pattern in Vim9script

## Overview

The **Factory Method Pattern** is a creational design pattern that defines an interface for creating objects, letting subclasses decide which concrete class to instantiate.

## Intent

- Encapsulate object creation in a creator
- Let subclasses choose the product type
- Reduce coupling between client and concrete products

## Also Known As

- None

## When to Use

Use the Factory Method pattern when:
- A class cannot anticipate the class of objects it must create
- Subclasses should control object creation
- You want to isolate creation logic from client code

## Structure

```
Creator -> Product
ConcreteCreator -> ConcreteProduct
```

## Participants

1. **Creator**: Declares the factory method (`Application`, `DocumentCreator`)
2. **Concrete Creator**: Implements creation (`WindowsApplication`, `TextEditor`)
3. **Product**: Defines the interface (`Dialog`, `Document`)
4. **Concrete Product**: Concrete implementations (`WindowsDialog`, `MarkdownDocument`)

## Implementation in Vim9script

The examples use Vim9 classes, abstract classes, and type annotations:

```vim
abstract class Application
  abstract def CreateDialog(): Dialog
endclass
```

## Examples Included

### 1. Platform-Specific Dialogs
**Scenario**: Different application subclasses create platform dialogs.

**Components**:
- Creator: `Application`
- Products: `Dialog`, `WindowsDialog`, `LinuxDialog`, `MacOSDialog`

**Usage**:
```vim
var app = WindowsApplication.new()
app.Render()
```

### 2. Document Type Creators
**Scenario**: Editors create different document types.

**Components**:
- Creator: `DocumentCreator`
- Products: `Document`, `TextDocument`, `MarkdownDocument`

**Usage**:
```vim
var editor = MarkdownEditor.new()
editor.Save('readme')
```

## Running the Examples

### Source the dialog example
```vim
:source dialog_factory.vim
```

### Run the dialog demo
```vim
:call g:RunDialogFactoryDemo()
```

### Source the document example
```vim
:source document_factory.vim
```

### Run the document demo
```vim
:call g:RunDocumentFactoryDemo()
```

## Key Concepts Demonstrated

1. **Creation Encapsulation** in creator classes
2. **Subclass Control** over concrete product selection
3. **Client Decoupling** from concrete products

## Advantages

1. **Open/Closed Principle**: Add products by adding creators
2. **Testability**: Creation logic is centralized
3. **Flexibility**: Subclasses control product choice

## Disadvantages

1. **More Classes**: Each product often needs a creator
2. **Indirection**: Adds a layer between client and product

## Related Patterns

- **Abstract Factory**: Creates product families
- **Builder**: Builds complex objects step by step
- **Prototype**: Clones existing objects

## Vim9script Notes

- Abstract classes make factory methods explicit
- Global demo functions keep Vim usage simple
- Type annotations improve intent clarity

## Requirements

- Vim 9.0 or later (for Vim9script class support)
- No external dependencies

## License

MIT License - Feel free to use this for learning and teaching design patterns!

## Credits

These design pattern examples were generated by GitHub Copilot to demonstrate modern Vim9script capabilities and software design principles.

## References

For more information about the Factory Method pattern, visit:

- **Refactoring.Guru**: [Factory Method Pattern](https://refactoring.guru/design-patterns/factory-method)
- **Gang of Four Book**: "Design Patterns: Elements of Reusable Object-Oriented Software" by Gamma, Helm, Johnson, Vlissides - Pages 107-116
- **Wikipedia**: [Factory Method Pattern](https://en.wikipedia.org/wiki/Factory_method_pattern)
- **SourceMaking**: [Factory Method Design Pattern](https://sourcemaking.com/design_patterns/factory_method)

## Conclusion

The Factory Method pattern centralizes object creation and lets subclasses decide concrete types. This Vim9script example shows both dialog and document factories using clear creator hierarchies.
